let r=0,l=0,a=0,d=!0;const c=document.getElementById("question"),g=document.getElementById("answers"),b=document.getElementById("score"),k=document.getElementById("streak"),B=document.getElementById("progress"),u=document.getElementById("message"),I=document.getElementById("correct-sound"),x=document.getElementById("wrong-sound"),S=document.getElementById("mode"),h=document.getElementById("high-score");document.getElementById("music");document.getElementById("sound");const $=new URLSearchParams(window.location.search),i=$.get("mode");S.value=i??"mul10";function E(){let e,t,n;switch(i){case"add10":e=o(1,10),t=o(1,10),n=e+t,c.textContent=`${e} + ${t} = ?`;break;case"add20":e=o(1,20),t=o(1,20),n=e+t,c.textContent=text`${e} + ${t} = ?`;break;case"add50":e=o(1,50),t=o(1,50),n=e+t,c.textContent=`${e} + ${t} = ?`;break;case"mul5":e=o(1,5),t=o(1,5),n=e*t,c.textContent=`${e} × ${t} = ?`;break;case"mul10":default:e=o(1,10),t=o(1,10),n=e*t,c.textContent=`${e} × ${t} = ?`;break}const s=M(n);v(s,n)}function M(e){let t=[e];for(;t.length<6;){let n=e+o(-10,10);n!==e&&n>0&&!t.includes(n)&&t.push(n)}return H(t)}function v(e,t){g.innerHTML="",e.forEach(n=>{const s=document.createElement("button");s.classList.add("answer-button"),s.textContent=n,s.addEventListener("click",()=>L(n,t,s)),g.appendChild(s)})}function L(e,t,n){if(d){d=!1,c.textContent=c.textContent.replace("?",t);var s=1e3;e===t?(r+=10,l+=1,a+=5,u.textContent=q(),I.play(),n.style.backgroundColor="#4caf50"):(s=4e3,r=0,l=0,u.textContent="Try Again!",x.play(),n.style.backgroundColor="#f44336",P(t)),p(),A(),setTimeout(()=>{d=!0,u.textContent="",E()},s)}}function A(){a>=100&&(a=0),B.style.width=`${a}%`}function P(e){document.querySelectorAll(".answer-button").forEach(n=>{parseInt(n.textContent)===e&&(n.style.backgroundColor="#4caf50")})}function q(){const e=["Awesome!","Super Star!","Math Genius!","Great Job!","Well Done!"];return e[o(0,e.length-1)]}function o(e,t){return Math.floor(Math.random()*(t-e+1)+e)}function H(e){return e.sort(()=>Math.random()-.5)}var y=0;function m(){return y}function C(e){y=e}E();p();window.addEventListener("beforeunload",()=>{const e=m();(!e||r>parseInt(e))&&C(r)});document.getElementById("music");document.getElementById("sound");let f=!1;const w=new Audio("sounds/background.mp3");w.loop=!0;window.addEventListener("load",()=>{const e=m();e&&(h.textContent=`High Score: ${e}`)});function p(){b.textContent=`Score: ${r} `,k.textContent=`Streak: ${l} `;const e=m();(!e||r>parseInt(e))&&(C(r),h.textContent=`High Score: ${r} `)}document.addEventListener("click",()=>{f||(w.play(),f=!0)},{once:!0});
